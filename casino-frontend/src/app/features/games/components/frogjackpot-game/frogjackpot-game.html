<div class="frogjackpot-game">
  <!-- Header -->
  <header class="game-title">
    <div class="header-left">
      <button class="back-games-btn" (click)="onBackClick()" title="Voltar aos jogos">
        <span class="back-icon">‚Üê</span>
        <span class="back-text">Jogos</span>
      </button>
    </div>
    <div class="title-content">
      <span class="frog-icon">üê∏</span>
      <h1>FrogJackpot</h1>
    </div>
  </header>

  <!-- Main Content - Layout 2 Colunas -->
  <div class="main-content">
    
    <!-- Left Panel - Game Area -->
    <div class="game-panel">
      
      <!-- Chip Selection Grid -->
      <div class="selection-area">
        <h2 class="section-title">
          <span class="icon">üê∏</span> Escolha 6 Fichas 
          <span class="subtitle">(clique para selecionar)</span>
        </h2>
        
        <app-color-grid
          [colors]="availableColors"
          [selectedIndices]="selectedIndices"
          [isDisabled]="isPlaying"
          [maxSelections]="maxSelections"
          (colorSelected)="onColorSelected($event)"
        />
        
        <div class="selection-counter">
          <span class="counter-text">Selecionadas: {{ selectedIndices.length }} / {{ maxSelections }}</span>
        </div>
      </div>

      <!-- Choices Comparison - Suas Escolhas VS Sistema -->
      <div class="comparison-area">
        <div class="player-side">
          <div class="side-label">
            <span class="label-icon">üéØ</span> Suas Escolhas
            <span class="side-hint">(clique para remover)</span>
          </div>
          <div class="slots-row">
            @for (slot of playerChoices; track $index; let i = $index) {
              <div class="slot-wrapper">
                <app-color-slot 
                  [color]="slot" 
                  [isEmpty]="!slot"
                  [index]="i"
                  [isClickable]="true"
                  [isDisabled]="isPlaying"
                  (slotClicked)="onSlotCleared($event)"
                />
                <span class="slot-number">{{ i + 1 }}</span>
              </div>
            }
            @for (empty of emptyPlayerSlots; track $index; let i = $index) {
              <div class="slot-wrapper">
                <app-color-slot [isEmpty]="true" />
                <span class="slot-number">{{ playerChoices.length + i + 1 }}</span>
              </div>
            }
          </div>
        </div>

        <div class="vs-divider">
          <span class="vs-text">VS</span>
        </div>

        <div class="system-side">
          <div class="side-label">
            <span class="label-icon">üê∏</span> Sistema
          </div>
          <div class="slots-row">
            @for (slot of systemSlots; track $index; let i = $index) {
              <div class="slot-wrapper">
                <app-color-slot 
                  [color]="slot" 
                  [isEmpty]="!slot"
                  [isRevealing]="isPlaying && !slot"
                />
                <span class="slot-number">{{ i + 1 }}</span>
              </div>
            }
          </div>
        </div>
      </div>
    </div>

    <!-- Right Panel - Betting Controls -->
    <div class="betting-panel">
      
      <!-- Bet Amount -->
      <div class="bet-section">
        <h3 class="section-title">
          <span class="icon">üí∞</span> Valor da Aposta
        </h3>
        
        <app-bet-controls
          [currentBet]="currentBet"
          [balance]="balance"
          [isDisabled]="isPlaying"
          (betChanged)="onBetChanged($event)"
        />
      </div>

      <!-- Error Message -->
      @if (errorMessage) {
        <div class="error-banner">
          <span class="error-icon">‚ö†Ô∏è</span>
          <span class="error-text">{{ errorMessage }}</span>
        </div>
      }

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button 
          class="btn-play"
          [disabled]="!canPlay || isPlaying"
          [class.ready]="canPlay && !isPlaying"
          (click)="onPlayClicked()">
          <span class="btn-icon">üé∞</span> JOGAR AGORA
        </button>
        
        <button 
          class="btn-reset"
          [disabled]="isPlaying || selectedIndices.length === 0"
          (click)="onResetClicked()">
          <span class="btn-icon">üîÑ</span> LIMPAR TUDO
        </button>
      </div>

      <!-- How to Play -->
      <div class="how-to-play">
        <h4>Como Jogar:</h4>
        <p>Selecione 6 fichas na ordem que voc√™ acha que o sistema vai sortear. Quanto mais fichas voc√™ acertar na posi√ß√£o correta, maior seu pr√™mio! üèÜ</p>
      </div>
    </div>
  </div>

  <!-- Result Display (overlay) -->
  @if (showResult && result) {
    <app-result-display
      [result]="result"
      [isVisible]="showResult"
    />
  }

  <!-- Modal de Confirma√ß√£o de Sa√≠da -->
  @if (showExitModal) {
    <div class="exit-modal-overlay" (click)="cancelExit()">
      <div class="exit-modal" (click)="$event.stopPropagation()">
        <div class="modal-image">
          <img src="https://i.postimg.cc/wvMy3D2y/Gemini-Generated-Image-jhrrirjhrrirjhrr.png" alt="Minerador" />
        </div>
        <div class="modal-content">
          <p class="motivational-text">{{ exitModalText }}</p>
        </div>
        <div class="modal-actions">
          <button class="btn-stay" (click)="cancelExit()">
            <span class="btn-icon">üí™</span>
            Continuar Jogando
          </button>
          <button class="btn-leave" (click)="confirmExit()">
            Sair mesmo assim
          </button>
        </div>
      </div>
    </div>
  }

  <!-- Animated Background -->
  <div class="animated-background">
    <div class="glow glow-1"></div>
    <div class="glow glow-2"></div>
  </div>
</div>
